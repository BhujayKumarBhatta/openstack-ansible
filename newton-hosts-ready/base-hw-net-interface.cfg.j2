# {{ ansible_managed }}
{{ mytest }}
{{ physical_interfaces }}

# The loopback network interface
auto lo
iface lo inet loopback
{% for pi in physical_interfaces %}
auto {{ pi.name }}
{% if pi.address %}
iface {{ pi.name }} inet static
	address {{ pi.address }}
    netmask {{ pi.netmask }}
    broadcast {{ pi.broadcast }}
{% if pi.gateway %}
    gateway {{ pi.gateway }}
{% endif %}
{% if pi.dns %}
    dns-nameservers {{ pi.dns }}
{% endif %}
{% endif %}
{% if not pi.address %}
iface {{ pi.name }} inet manual
{% endif %}
{% if  pi.part_of_vlan %}
	vlan-raw-device {{ pi.parent_name }}
{% endif %}
{% endfor %} 

#######################################################
{% raw %}


{% for ifc in  physical_interfaces  %}

auto {{ ifc.name }}
{% if ifc.address %}
iface {{ ifc.name }} inet static
    hwaddress ether {{ ifc.hwaddress }}
    address {{ ifc.address }}
    netmask {{ ifc.netmask }}
    broadcast {{ ifc.broadcast }}
{% if ifc.gateway %}
    gateway {{ ifc.gateway }}
{% endif %}
{% if ifc.dns %}
    dns-nameservers {{ ifc.dns }}
{% endif %}
{% endif %}
{% if not ifc.address %}
iface {{ ifc.name }} inet manual
{% endif %}
{% if  ifc.part_of_vlan %}
	vlan-raw-device {{ ifc.parent_name }}
{% endif %}

{% endfor %}

#{% for ifc in {{ physical_interfaces }} %}

#{% endfor %}

{% endraw %}
